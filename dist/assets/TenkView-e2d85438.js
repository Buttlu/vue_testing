import{h as V,m as a,n as D,o as r,c as d,b as t,t as $,F as M,r as q,s as U,l as S,_ as F,x as W,y as Z,u as L,d as ee,v as le,z as O,i as Y,j as te,q as A,p as ae,f as se}from"./index-8f82ef3c.js";import{d as ne}from"./vuedraggable.umd-6b07a0cc.js";const oe={class:"errorText"},re={key:0},ue={key:1},ie={class:"wrapper"},ce={class:"dice-field"},ve=["id"],de=["onClick"],_e={id:"reroll"},pe=V({__name:"TenkDice",props:["player_status"],emits:["send-score"],setup(g,{emit:y}){const s=g,v=a({name:"d-1",n_value:1,num:6,reroll:!0}),p=a({name:"d-2",n_value:2,num:6,reroll:!0}),u=a({name:"d-3",n_value:3,num:6,reroll:!0}),i=a({name:"d-4",n_value:4,num:6,reroll:!0}),n=a({name:"d-5",n_value:5,num:6,reroll:!0}),o=a({name:"d-6",n_value:6,num:6,reroll:!0}),k=a([v,p,u,i,n,o]),h=a(!1),T=a(0),P=a(!1),b=a(!1),E=a(!1),C=a(""),N=a(s.player_status);let _=a(0);D(()=>{T.value=0,h.value=!1,setInterval(x,10)});function m(){C.value="",!(_.value<N.value&&!w()&&!h.value)&&(y("send-score",T.value),E.value&&(T.value=0),h.value=!1,_.value++)}function w(){let e=!1;return T.value>=1e3?(e=!0,C.value=""):C.value="You need 1000 points first time. You can save less later",e}function x(){document.querySelector("#d-1").innerHTML=v.value.num.toString(),document.querySelector("#d-2").innerHTML=p.value.num.toString(),document.querySelector("#d-3").innerHTML=u.value.num.toString(),document.querySelector("#d-4").innerHTML=i.value.num.toString(),document.querySelector("#d-5").innerHTML=n.value.num.toString(),document.querySelector("#d-6").innerHTML=o.value.num.toString()}function j(){let e=[];P.value=!1,b.value=!1,C.value="",k.value.forEach(l=>{l.value.reroll&&(l.value.num=Math.floor(Math.random()*6+1),e.push(l.value.num))}),z(e)}function z(e){let l=0,c=!1;if(e.length==6&&(l+=G(e.sort()),l+=J(e.sort()),c=l!=0),e.length>=3&&!c){const f=X(e);l+=f[0]+f[1],c=f[0]!=0&&f[1]!=0}e.forEach(f=>{f==1&&!P.value?l+=100:f==5&&!b.value&&(l+=50)}),l==0?(h.value=!0,Q()):T.value+=l}function G(e){let l=!0;for(let c=0;c<6;c++)e[c]-1!=c&&(l=!1);return l&&(P.value=!0,b.value=!0),l?1500:0}function J(e){const l=e[0]==e[1]&&e[2]==e[3]&&e[4]==e[5]&&e[0]!=e[2]&&e[2]!=e[4];return l&&(e.includes(1)&&(P.value=!0),e.includes(5)&&(b.value=!0)),l?500:0}function X(e){let l=[0,0,0,0,0,0];e.forEach(I=>{l[I-1]++});let c=[0,0],f=0,B=!0;for(let I=0;I<l.length;I++)if(l[I]>=3){const R=I+1;R==1?P.value=!0:R==5&&(b.value=!0),f=R*100,f*=f==100?10:1,f*=Math.pow(2,l[I]-3),f>0&&(B?(c[0]=f,B=!1):c[1]=f)}return c}function K(e){k.value[e-1].value.reroll=!1;let l=0;k.value.forEach(c=>{c.value.reroll&&l++}),l==0&&setTimeout(H,500,!1)}function Q(){setTimeout(()=>{T.value=0,H(!0),m()},2e3)}function H(e){k.value.forEach(l=>{l.value.reroll=!0}),e&&(E.value=e)}return(e,l)=>(r(),d(M,null,[t("span",oe,$(C.value),1),t("button",{id:"claim-score-button",onClick:l[0]||(l[0]=c=>{H(!0),m()})},"Claim Score"),h.value?(r(),d("h2",ue,"Failed turn")):(r(),d("h2",re,"Current Score: "+$(T.value),1)),t("div",ie,[t("div",ce,[(r(!0),d(M,null,q(k.value,c=>(r(),d("div",{class:"pair",key:c.value.name},[t("span",{id:c.value.name,class:U(["dice",{reroll:c.value.reroll,claimed:!c.value.reroll}])},null,10,ve),c.value.reroll?(r(),d("button",{key:0,onClick:f=>K(c.value.n_value)},"Save",8,de)):S("",!0)]))),128))])]),t("div",_e,[t("button",{onClick:l[1]||(l[1]=c=>j())},"Roll dice")])],64))}});const fe=F(pe,[["__scopeId","data-v-6a5564db"]]),ye={class:"head"},me={class:"score"},he={class:"remaining-score"},ge=V({__name:"TenkScore",props:["recieved_players"],setup(g){const y=g;W(u=>({"727a39b5":L(v)}));const s=a(y.recieved_players),v=s.value.length;Z(()=>{document.querySelectorAll(".score").forEach(i=>{let n=i.scrollHeight;i.scrollTo({top:n,left:0,behavior:"smooth"})})});function p(u){return u.reduce((i,n)=>i+n,0)}return(u,i)=>(r(!0),d(M,null,q(s.value,n=>(r(),d("div",{class:"list-wrapper",key:n},[t("div",ye,$(n.name),1),t("div",me,[t("ul",null,[(r(!0),d(M,null,q(n.scores,o=>(r(),d("li",{key:o},[t("span",null,$(o),1)]))),128))])]),t("div",he," Needed: "+$(1e4-p(n.scores)),1),t("div",{class:U(["total-score",{won:p(n.scores)==1e4}])}," Total: "+$(p(n.scores)),3)]))),128))}});const ke=F(ge,[["__scopeId","data-v-21a5bce4"]]),Se={class:"setPlayers"},$e=t("h1",null,"Add players",-1),Te={class:"addPlayer"},be=t("br",null,null,-1),Pe={class:"showPlayers"},Ce=t("div",{class:"rulesbox"},null,-1),we=V({__name:"TenkRegisterPlayers",emits:["send-players"],setup(g,{emit:y}){let s=a([]),v=a("");D(()=>{let i=localStorage.getItem("save_players");i!=null&&(s.value=JSON.parse(i)),console.log(`players: ${s.value} ; savedPlayers: ${i}`),localStorage.removeItem("save_players")});function p(){y("send-players",s.value)}function u(){v.value==""||v.value==null||(s.value.push(v.value),v.value="")}return(i,n)=>(r(),d("div",Se,[$e,t("div",Te,[ee(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=o=>O(v)?v.value=o:v=o),placeholder:"Player name"},null,512),[[le,L(v)]]),t("button",{onClick:n[1]||(n[1]=o=>u())},"Add player"),be,t("button",{onClick:n[2]||(n[2]=o=>p())},"Start Game")]),t("div",Pe,[Y(L(ne),{modelValue:L(s),"onUpdate:modelValue":n[3]||(n[3]=o=>O(s)?s.value=o:s=o),tag:"ul",group:"players",animation:300,"item-key":"p"},{item:te(({element:o})=>[t("li",null,$(o),1)]),_:1},8,["modelValue"])]),Ce]))}}),xe=t("h1",null,"Final Scoreboard",-1),Ie={class:"leaderboard"},Me={class:"play-again"},Ve=t("h3",null,"Play again?",-1),Ee={class:"pa-buttons"},Le=V({__name:"TenkDone",props:["scoreboard"],setup(g){const s=a(g.scoreboard);D(()=>{console.log("hello there"),console.log(s.value)});function v(p){if(p){let u=[];s.value.forEach(i=>{u.push(i.name)}),localStorage.setItem("save_players",JSON.stringify(u))}window.location.reload()}return(p,u)=>(r(),d(M,null,[xe,t("div",Ie,[t("ol",null,[(r(!0),d(M,null,q(s.value,i=>(r(),d("li",{key:i},$(i.name)+" Â ("+$(i.scores.length)+" throws) ",1))),128))])]),t("div",Me,[Ve,t("div",Ee,[t("button",{onClick:u[0]||(u[0]=i=>v(!0))},"Same Players"),t("button",{onClick:u[1]||(u[1]=i=>v(!1))},"New Players")])])],64))}});const qe=g=>(ae("data-v-d28ba08e"),g=g(),se(),g),De={key:1,id:"banner"},Ne={key:0,class:"current-player"},He=qe(()=>t("span",{class:"name"},"Currently playing",-1)),Re={key:0,class:"player"},Ae={key:1,class:"player"},Fe={key:2,class:"wrapper"},Be={class:"score-wrapper"},Oe={key:0,class:"dice-wrapper"},Ue=V({__name:"TenkView",setup(g){const y=a([]),s=a([]),v=a([]),p=a(0),u=a(!1),i=a(!1),n=a(0),o=a(0),k=a(!1),h=a(!1);D(()=>{});function T(_){u.value=!0,p.value=_.length,console.log(`playerCount: ${p.value}`);let m=0;_.forEach(w=>{const x=a({name:w,scores:[],isIn:!1,currentlyPlaying:!1,pos:m%p.value});y.value.push(x.value),m++})}function P(_){if(n.value=_,i.value=!0,_>0){const m=y.value[o.value].scores.reduce((w,x)=>w+x,0)+_;if(m>1e4){N();return}else m==1e4&&s.value.push(o.value);y.value[o.value].scores.push(_),y.value[o.value].isIn=!0}b()}function b(){if(p.value-s.value.length==1){E();return}o.value=(o.value+1)%p.value,s.value.includes(o.value)&&b()}function E(){for(let _=0;_<p.value;_++)s.value.includes(_)||s.value.push(_);for(let _ in s.value)v.value.push(y.value.find(m=>m.pos==_));v.value=C(y.value,s.value),console.log(`1: ${v.value}`),h.value=!0}function C(_,m){return[..._].sort((w,x)=>m.indexOf(w.pos)-m.indexOf(x.pos))}function N(){k.value=!0,setTimeout(()=>{k.value=!1},2e3),b()}return(_,m)=>(r(),d(M,null,[u.value?S("",!0):(r(),A(we,{key:0,class:"TenkPlayers",onSendPlayers:T})),h.value?S("",!0):(r(),d("div",De,[u.value&&!h.value?(r(),d("div",Ne,[He,k.value?S("",!0):(r(),d("span",Re,$(y.value[o.value].name),1)),k.value?(r(),d("span",Ae,"Too many points, you need EXACTLY 10'000 points")):S("",!0)])):S("",!0)])),h.value?S("",!0):(r(),d("div",Fe,[t("div",Be,[u.value&&!h.value?(r(),A(ke,{key:0,recieved_players:y.value},null,8,["recieved_players"])):S("",!0)]),u.value&&!h.value?(r(),d("div",Oe,[Y(fe,{player_status:p.value,onSendScore:P},null,8,["player_status"])])):S("",!0)])),h.value?(r(),A(Le,{key:3,scoreboard:v.value,class:"game-over TenkPlayers"},null,8,["scoreboard"])):S("",!0)],64))}});const ze=F(Ue,[["__scopeId","data-v-d28ba08e"]]);export{ze as default};
