import{h as L,m as s,n as O,o as a,c as u,b as e,t as k,F as C,r as D,q as W,l as T,_ as R,s as oe,x as re,u as $,d as ue,v as ie,y as G,i as X,j as ce,p as U,f as Y,e as J,z as F}from"./index-2c3dad53.js";import{d as de}from"./vuedraggable.umd-15db9859.js";const ve={class:"errorText"},_e={key:0},pe={key:1},fe={class:"wrapper"},ye={class:"dice-field"},he=["id"],me={id:"reroll"},ge={key:1,id:"disable-button"},ke=L({__name:"TenkDice",props:["player_status"],emits:["send-score"],setup(f,{emit:g}){const o=f,v=s({name:"d-1",n_value:1,num:6,reroll:!0}),_=s({name:"d-2",n_value:2,num:6,reroll:!0}),i=s({name:"d-3",n_value:3,num:6,reroll:!0}),d=s({name:"d-4",n_value:4,num:6,reroll:!0}),r=s({name:"d-5",n_value:5,num:6,reroll:!0}),p=s({name:"d-6",n_value:6,num:6,reroll:!0}),y=s([v,_,i,d,r,p]),E=s(!1),b=s(0),w=s(!1),M=s(!1),H=s(!1),V=s(""),c=s(!1),S=s(o.player_status);let P=s(0);O(()=>{b.value=0,E.value=!1,setInterval(Z,10)});function I(){V.value="",!(P.value<S.value&&!Q()&&!E.value)&&(g("send-score",b.value),H.value&&(b.value=0),E.value=!1,P.value++)}function Q(){let t=!1;return b.value>=1e3?(t=!0,V.value=""):V.value="You need 1000 points first time. You can save less later",t}function Z(){document.querySelector("#d-1").innerHTML=v.value.num.toString(),document.querySelector("#d-2").innerHTML=_.value.num.toString(),document.querySelector("#d-3").innerHTML=i.value.num.toString(),document.querySelector("#d-4").innerHTML=d.value.num.toString(),document.querySelector("#d-5").innerHTML=r.value.num.toString(),document.querySelector("#d-6").innerHTML=p.value.num.toString()}function ee(){let t=[];w.value=!1,M.value=!1,V.value="",y.value.forEach(l=>{l.value.reroll&&(l.value.num=Math.floor(Math.random()*6+1),t.push(l.value.num))}),te(t)}function te(t){let l=0,n=!1;if(t.length==6&&(l+=le(t.sort()),l+=se(t.sort()),n=l!=0),t.length>=3&&!n){const h=ne(t);l+=h[0]+h[1],n=h[0]!=0&&h[1]!=0}t.forEach(h=>{h==1&&!w.value?(l+=100,y.value.forEach(x=>{x.value.num==1&&N(x.value.n_value)})):h==5&&!M.value&&(l+=50,y.value.forEach(x=>{x.value.num==5&&N(x.value.n_value)}))}),l==0?(E.value=!0,ae()):b.value+=l}function le(t){let l=!0;for(let n=0;n<6;n++)t[n]-1!=n&&(l=!1);if(l&&(w.value=!0,M.value=!0),l)for(let n=1;n<=6;n++)N(n);return l?1500:0}function se(t){const l=t[0]==t[1]&&t[2]==t[3]&&t[4]==t[5]&&t[0]!=t[2]&&t[2]!=t[4];if(l){t.includes(1)&&(w.value=!0),t.includes(5)&&(M.value=!0);for(let n=1;n<=6;n++)N(n)}return l?500:0}function ne(t){let l=[0,0,0,0,0,0];t.forEach(q=>{l[q-1]++});let n=[0,0],h=0,x=!0;for(let q=0;q<l.length;q++)if(l[q]>=3){const A=q+1;A==1?w.value=!0:A==5&&(M.value=!0),h=A*100,h*=h==100?10:1,h*=Math.pow(2,l[q]-3),h>0&&(x?(n[0]=h,x=!1):n[1]=h),y.value.forEach(z=>{z.value.num==A&&N(z.value.n_value)})}return n}function N(t){y.value[t-1].value.reroll=!1;let l=0;y.value.forEach(n=>{n.value.reroll&&l++}),l==0&&(c.value=!0,setTimeout(B,2e3,!1))}function ae(){c.value=!0,setTimeout(()=>{b.value=0,B(!0),I()},2e3)}function B(t){y.value.forEach(l=>{l.value.reroll=!0}),t&&(H.value=t),c.value=!1}return(t,l)=>(a(),u(C,null,[e("span",ve,k(V.value),1),e("button",{id:"claim-score-button",onClick:l[0]||(l[0]=n=>{B(!0),I()})},"Claim Score"),E.value?(a(),u("h2",pe,"Failed turn")):(a(),u("h2",_e,"Current Score: "+k(b.value),1)),e("div",fe,[e("div",ye,[(a(!0),u(C,null,D(y.value,n=>(a(),u("div",{class:"pair",key:n.value.name},[e("span",{id:n.value.name,class:W(["dice",{reroll:n.value.reroll,claimed:!n.value.reroll}])},null,10,he)]))),128))])]),e("div",me,[c.value?T("",!0):(a(),u("button",{key:0,onClick:l[1]||(l[1]=n=>ee())},"Roll dice")),c.value?(a(),u("button",ge,"Roll dice")):T("",!0)])],64))}});const Se=R(ke,[["__scopeId","data-v-69df4e89"]]),m=oe({current:0}),Te={class:"head"},$e={class:"score"},be={class:"remaining-score"},we={key:1,class:"list-wrapper"},Pe={class:"head"},Ie={class:"score"},xe={class:"remaining-score"},Ce=L({__name:"TenkScore",props:["recieved_players","current_player"],setup(f){const o=s(f.recieved_players);o.value.length,re(()=>{document.querySelectorAll(".score").forEach(d=>{let r=d.scrollHeight;d.scrollTo({top:r,left:0,behavior:"smooth"})})}),O(()=>{console.log(m.current)});function v(){return window.outerWidth>900?document.documentElement.style.setProperty("--height","82%"):document.documentElement.style.setProperty("--height","70%"),window.outerWidth>900}function _(i){return i.reduce((d,r)=>d+r,0)}return(i,d)=>(a(),u(C,null,[v()?(a(!0),u(C,{key:0},D(o.value,r=>(a(),u("div",{class:"list-wrapper",key:r},[e("div",Te,k(r.name),1),e("div",$e,[e("ul",null,[(a(!0),u(C,null,D(r.scores,p=>(a(),u("li",{key:p},[e("span",null,k(p),1)]))),128))])]),e("div",be," Needed: "+k(1e4-_(r.scores)),1),e("div",{class:W(["total-score",{won:_(r.scores)==1e4}])}," Total: "+k(_(r.scores)),3)]))),128)):T("",!0),v()?T("",!0):(a(),u("div",we,[e("div",Pe,k(o.value[$(m).current].name),1),e("div",Ie,[e("ul",null,[(a(!0),u(C,null,D(o.value[$(m).current].scores,r=>(a(),u("li",{key:r},[e("span",null,k(r),1)]))),128))])]),e("div",xe," Needed: "+k(1e4-_(o.value[$(m).current].scores)),1),e("div",{class:W(["total-score",{won:_(o.value[$(m).current].scores)==1e4}])}," Total: "+k(_(o.value[$(m).current].scores)),3)]))],64))}});const Ee=R(Ce,[["__scopeId","data-v-7ff62d94"]]),j=f=>(U("data-v-66787f28"),f=f(),Y(),f),Me={class:"setPlayers"},Ve={class:"playerbox"},qe=j(()=>e("h2",null,"Add players",-1)),Ne={class:"addPlayer"},De={class:"showPlayers"},Le=j(()=>e("h2",null,"Current players",-1)),Re=j(()=>e("div",{class:"rulesbox"},[e("h2",null,"Rules and how to play"),e("p",null,[J(" In 10'00 you throw up to 6 dice with the goal of getting "),e("em",null,"exactly"),J(" 10'000 points. If any dice gives points, that/ those dice are removed and only given back if all 6 dice are used without the players losing that turn. If all 6 dice haven given points then the player can roll all 6 again. ")]),e("p",null," Points are given through: straight (1 - 6), 3 pairs, triples, and singular 1s and 5s. Strights give 1500 points. 3 pairs gives 500 points. Triples gives 100 * the number on the dice and doubled if more than 3 dice (a triplet of 4 gives 400 points, quadruple of 4 gives 800 points, quintuple of 4 gives 1600 points, etc, exception for triplet of 1s which give 1000 points). 1s and 5s that don't go to any of the categories above give 100 and 50 points respcetivly. "),e("p",null," The first time you claim points you need 1000 points or more. Afterwards any amount can be claimed. If the total score goes above 10'000, the that turn isn't counted. "),e("p",null," If a dicethrow doesn't yeild any points, then the players that threw fails that turn and it goes to the next player. ")],-1)),He=L({__name:"TenkRegisterPlayers",emits:["send-players"],setup(f,{emit:g}){let o=s([]),v=s("");O(()=>{let d=localStorage.getItem("save_players");d!=null&&(o.value=JSON.parse(d)),localStorage.removeItem("save_players")});function _(){g("send-players",o.value)}function i(){v.value==""||v.value==null||(o.value.push(v.value),v.value="")}return(d,r)=>(a(),u("div",Me,[e("div",Ve,[qe,e("div",Ne,[ue(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=p=>G(v)?v.value=p:v=p),placeholder:"Player name"},null,512),[[ie,$(v)]]),e("button",{onClick:r[1]||(r[1]=p=>i()),id:"add"},"Add player")]),e("div",De,[Le,X($(de),{modelValue:$(o),"onUpdate:modelValue":r[2]||(r[2]=p=>G(o)?o.value=p:o=p),tag:"ul",group:"players",animation:300,"item-key":"p"},{item:ce(({element:p})=>[e("li",null,k(p),1)]),_:1},8,["modelValue"])]),e("button",{onClick:r[3]||(r[3]=p=>_()),id:"send"},"Start Game")]),Re]))}});const Ae=R(He,[["__scopeId","data-v-66787f28"]]),K=f=>(U("data-v-d5479f0c"),f=f(),Y(),f),Be={class:"container"},Fe=K(()=>e("h1",null,"Final Scoreboard",-1)),We={class:"leaderboard"},Oe={class:"play-again"},Ue=K(()=>e("h3",null,"Play again?",-1)),Ye={class:"pa-buttons"},je=L({__name:"TenkDone",props:["scoreboard"],setup(f){const o=s(f.scoreboard);function v(_){if(_){let i=[];o.value.forEach(d=>{i.push(d.name)}),localStorage.setItem("save_players",JSON.stringify(i))}window.location.reload()}return(_,i)=>(a(),u("div",Be,[Fe,e("div",We,[e("ol",null,[(a(!0),u(C,null,D(o.value,d=>(a(),u("li",{key:d},k(d.name)+" Â ("+k(d.scores.length)+" throws) ",1))),128))])]),e("div",Oe,[Ue,e("div",Ye,[e("button",{onClick:i[0]||(i[0]=d=>v(!0))},"Same Players"),e("button",{onClick:i[1]||(i[1]=d=>v(!1))},"New Players")])])]))}});const ze=R(je,[["__scopeId","data-v-d5479f0c"]]),Ge=f=>(U("data-v-4dd1b539"),f=f(),Y(),f),Je={key:1,id:"banner"},Xe={key:0,class:"current-player"},Ke=Ge(()=>e("span",{class:"name"},"Currently playing",-1)),Qe={key:0,class:"player"},Ze={key:1,class:"player"},et={key:2,class:"wrapper"},tt={class:"score-wrapper"},lt={key:0,class:"dice-wrapper"},st=L({__name:"TenkView",setup(f){const g=s([]),o=s([]),v=s([]),_=s(0),i=s(!1),d=s(!1),r=s(0),p=s(!1),y=s(!1);function E(c){i.value=!0,_.value=c.length;let S=0;c.forEach(P=>{const I=s({name:P,scores:[],isIn:!1,currentlyPlaying:!1,pos:S%_.value});g.value.push(I.value),S++})}function b(c){if(r.value=c,d.value=!0,c>0){const S=g.value[m.current].scores.reduce((P,I)=>P+I,0)+c;if(S>1e4){V();return}else S==1e4&&o.value.push(m.current);g.value[m.current].scores.push(c),g.value[m.current].isIn=!0}w()}function w(){if(_.value-o.value.length==1){M();return}m.current=(m.current+1)%_.value,o.value.includes(m.current)&&w()}function M(){for(let c=0;c<_.value;c++)o.value.includes(c)||o.value.push(c);for(let c in o.value)v.value.push(g.value.find(S=>S.pos==c));v.value=H(g.value,o.value),y.value=!0}function H(c,S){return[...c].sort((P,I)=>S.indexOf(P.pos)-S.indexOf(I.pos))}function V(){p.value=!0,setTimeout(()=>{p.value=!1},2e3),w()}return(c,S)=>(a(),u(C,null,[i.value?T("",!0):(a(),F(Ae,{key:0,class:"TenkPlayers",onSendPlayers:E})),y.value?T("",!0):(a(),u("div",Je,[i.value&&!y.value?(a(),u("div",Xe,[Ke,p.value?T("",!0):(a(),u("span",Qe,k(g.value[$(m).current].name),1)),p.value?(a(),u("span",Ze,"Too many points, you need EXACTLY 10'000 points")):T("",!0)])):T("",!0)])),y.value?T("",!0):(a(),u("div",et,[e("div",tt,[i.value&&!y.value?(a(),F(Ee,{key:0,recieved_players:g.value,current_player:$(m).current},null,8,["recieved_players","current_player"])):T("",!0)]),i.value&&!y.value?(a(),u("div",lt,[X(Se,{player_status:_.value,onSendScore:b},null,8,["player_status"])])):T("",!0)])),y.value?(a(),F(ze,{key:3,scoreboard:v.value,class:"game-over TenkPlayers"},null,8,["scoreboard"])):T("",!0)],64))}});const ot=R(st,[["__scopeId","data-v-4dd1b539"]]);export{ot as default};
